# Pomodoro Productivity - Frontend

SPA-клиент для варианта 27 «Томатная продуктивность» (Pomodoro).

## Технологии

- **React 18** + **TypeScript**
- **Vite** — сборка
- **React Router v6** — маршрутизация
- **React Hook Form** + **Zod** — формы и валидация
- **Axios** — HTTP-клиент

## Быстрый старт

### 1. Установка зависимостей

```bash
cd apps/frontend
npm install
```

### 2. Настройка окружения

Скопируйте `.env.example` в `.env` и настройте URL API:

```bash
cp .env.example .env
```

Содержимое `.env`:

```text
VITE_API_BASE_URL=http://localhost:4000
```

### 3. Запуск

```bash
npm run dev
```

Frontend: **<http://localhost:5173>**. API должно быть доступно по `VITE_API_BASE_URL` (по умолчанию `http://localhost:4000`).

## Структура проекта

```text
src/
├── api/          # HTTP-клиент и API-сервисы
├── components/   # Переиспользуемые компоненты
├── config/       # Конфигурация (env)
├── context/      # React Context (Auth)
├── pages/        # Страницы приложения
├── styles/       # CSS стили
└── types/        # TypeScript типы
```

## Реализованные сценарии

### Аутентификация

- ✅ Регистрация (`/register`)
- ✅ Вход (`/login`)
- ✅ Выход
- ✅ Авто-обновление access token через refresh (HttpOnly cookie)
- ✅ Защита маршрутов

### Таймер Pomodoro (`/timer`)

- ✅ Помодоро (25 мин)
- ✅ Короткий перерыв (5 мин)
- ✅ Длинный перерыв (15 мин)
- ✅ Пауза/продолжение сессии
- ✅ Привязка к задаче
- ✅ Автоматическая смена типа после завершения
- ✅ Счётчик завершённых помодоро

### Задачи (`/tasks`)

- ✅ Список задач с фильтрацией (по статусу, приоритету, тегу)
- ✅ Создание задачи
- ✅ Редактирование задачи
- ✅ Удаление задачи
- ✅ Изменение статуса (pending → in_progress → completed)
- ✅ Привязка тегов к задачам

### Теги (`/tags`)

- ✅ Список тегов
- ✅ Создание тега с выбором цвета
- ✅ Редактирование тега
- ✅ Удаление тега
- ✅ Предпросмотр тега

### Статистика (`/reports`)

- ✅ Дневной отчёт (по дате)
- ✅ Недельный отчёт (с графиком по дням)
- ✅ Месячный отчёт (по неделям)
- ✅ Статистика по тегам
- ✅ Экспорт в CSV/JSON

### Настройки (`/settings`)

- ✅ Push-уведомления (вкл/выкл)
- ✅ Звуковые уведомления (вкл/выкл)
- ✅ Email-уведомления (вкл/выкл)

## Роли пользователей

- **user** — обычный пользователь, видит только свои данные
- **admin** — администратор (может видеть отчёты других пользователей)

## Хранение токенов

- **Access Token** — хранится в памяти (React Context)
- **Refresh Token** — хранится в HttpOnly cookie на сервере

При получении 401 ошибки:

1. Автоматически выполняется `POST /auth/refresh`
2. Refresh отправляется с cookie (`withCredentials: true`), при успехе оригинальный запрос повторяется
3. При неудаче — access сбрасывается и пользователь перенаправляется на `/login`

## UI/UX

- Современный интерфейс с боковой панелью навигации
- Адаптивная вёрстка
- Состояния загрузки, ошибок и пустых списков
- Toast-уведомления вместо alert
- Модальные окна для создания/редактирования
- Подтверждение удаления

## Команды

| Команда | Описание |
| ------- | -------- |
| `npm run dev` | Запуск dev-сервера |
| `npm run build` | Сборка для продакшена |
| `npm run preview` | Превью продакшен-сборки |

## Переменные окружения

| Переменная | Описание | Пример |
| ---------- | -------- | ------ |
| `VITE_API_BASE_URL` | URL API | `http://localhost:4000` |
